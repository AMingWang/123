<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>歡迎頁面 - 全功能版</title>
<style>
  /* Reset */
  * { box-sizing: border-box; }
  body {
    font-family: "Microsoft JhengHei", sans-serif;
    background: linear-gradient(135deg, #FFDEE9, #B5FFFC);
    margin: 0; color: #333;
    transition: background 0.5s, color 0.5s;
  }
  body.dark {
    background: #121212;
    color: #eee;
  }
  .container {
    max-width: 480px;
    margin: auto;
    min-height: 100vh;
    padding: 20px;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
  .welcome-box {
    background-color: white;
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    padding: 30px 40px;
    text-align: center;
    position: relative;
    transition: background-color 0.5s, color 0.5s;
  }
  body.dark .welcome-box {
    background-color: #222;
    box-shadow: 0 0 15px #00ffc8;
    color: #eee;
  }
  h1 {
    margin-bottom: 12px;
    font-size: 1.9rem;
  }
  p {
    margin: 8px 0 16px;
    font-size: 16px;
  }
  .user-info {
    margin-bottom: 15px;
  }
  .user-avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 3px solid #ff6b6b;
    object-fit: cover;
    margin: 0 auto 12px;
  }
  body.dark .user-avatar {
    border-color: #00ffc8;
  }
  button {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  .logout-button {
    background-color: #ff6b6b;
    color: white;
    width: 100%;
  }
  .logout-button:hover {
    background-color: #e63946;
  }
  .toggle-theme {
    background-color: #0077ff;
    color: white;
    margin-bottom: 20px;
    width: 100%;
  }
  .toggle-theme:hover {
    background-color: #005bb5;
  }
  .edit-profile-button {
    background-color: #34a853;
    color: white;
    margin: 15px 0 30px;
    width: 100%;
  }
  .edit-profile-button:hover {
    background-color: #0c7a29;
  }
  /* 編輯視窗 */
  #editProfileModal {
    display: none;
    position: fixed;
    z-index: 1500;
    left: 0; top: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.5);
    justify-content: center;
    align-items: center;
  }
  #editProfileModal.active {
    display: flex;
  }
  #editProfileModal .modal-content {
    background: white;
    border-radius: 12px;
    padding: 25px 30px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    position: relative;
  }
  body.dark #editProfileModal .modal-content {
    background: #222;
    color: #eee;
  }
  #editProfileModal label {
    display: block;
    margin-bottom: 6px;
    font-weight: 600;
  }
  #editProfileModal input[type="text"], #editProfileModal input[type="email"] {
    width: 100%;
    padding: 8px 10px;
    margin-bottom: 15px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 14px;
  }
  body.dark #editProfileModal input[type="text"], body.dark #editProfileModal input[type="email"] {
    background: #333;
    border-color: #555;
    color: #eee;
  }
  #editProfileModal button {
    width: 48%;
    margin: 0 1%;
  }
  #editProfileModal .close-btn {
    background: #ff6b6b;
  }
  #editProfileModal .save-btn {
    background: #34a853;
    color: white;
  }
  #editProfileModal button:hover {
    opacity: 0.85;
  }
  /* 公告 */
  .announcement {
    background: #ffe4e6;
    border-radius: 12px;
    padding: 15px 20px;
    margin-bottom: 25px;
    font-size: 14px;
    color: #b00020;
  }
  body.dark .announcement {
    background: #44000d;
    color: #ffb3b3;
  }
  /* 雙因素提示 */
  .twofa-warning {
    background: #fff3cd;
    border-radius: 12px;
    color: #856404;
    padding: 12px 20px;
    margin-bottom: 20px;
    font-size: 14px;
  }
  body.dark .twofa-warning {
    background: #533d00;
    color: #ffe58f;
  }
  /* 徽章 */
  .badges {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-bottom: 20px;
  }
  .badge {
    background: #ff6b6b;
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 13px;
    user-select: none;
  }
  body.dark .badge {
    background: #00ffc8;
    color: #222;
  }
  /* 背景選擇 */
  .bg-select {
    margin-bottom: 20px;
    display: flex;
    justify-content: center;
    gap: 15px;
  }
  .bg-option {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    cursor: pointer;
    border: 2px solid transparent;
    transition: border-color 0.3s;
  }
  .bg-option.active {
    border-color: #ff6b6b;
  }
  /* 自訂背景 */
  .bg1 { background: linear-gradient(135deg, #FFDEE9, #B5FFFC); }
  .bg2 { background: linear-gradient(135deg, #C9FFBF, #FFAFBD); }
  .bg3 { background: linear-gradient(135deg, #89F7FE, #66A6FF); }
  .bg4 { background: linear-gradient(135deg, #FBD3E9, #BB377D); }

  /* 社群分享按鈕 */
  .share-buttons {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 25px;
  }
  .share-btn {
    background: #0077ff;
    color: white;
    padding: 8px 14px;
    border-radius: 8px;
    font-size: 14px;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }
  .share-btn:hover {
    background: #005bb5;
  }
  /* 小圖示 */
  .share-btn svg {
    width: 16px;
    height: 16px;
    fill: white;
  }
  /* 個人化推薦 */
  .recommendations {
    background: #e0f7fa;
    border-radius: 12px;
    padding: 15px 20px;
    margin-bottom: 20px;
    font-size: 14px;
    color: #006064;
    text-align: left;
  }
  body.dark .recommendations {
    background: #004d40;
    color: #a7ffeb;
  }
  .recommendations ul {
    margin: 8px 0 0 18px;
    padding: 0;
  }
  /* 聊天小幫手 */
  #chatHelper {
    position: fixed;
    bottom: 40px;
    right: 40px;
    width: 60px;
    height: 60px;
    background: #0077ff;
    border-radius: 50%;
    box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: 28px;
    user-select: none;
  }
  #chatBox {
    display: none;
    position: fixed;
    bottom: 110px;
    right: 40px;
    width: 280px;
    max-height: 400px;
    background: white;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    overflow: hidden;
    flex-direction: column;
  }
  body.dark #chatBox {
    background: #222;
    color: #eee;
  }
  #chatBox.active {
    display: flex;
  }
  #chatMessages {
    flex-grow: 1;
    padding: 15px;
    overflow-y: auto;
    font-size: 14px;
  }
  #chatInputArea {
    border-top: 1px solid #ccc;
    display: flex;
  }
  body.dark #chatInputArea {
    border-color: #555;
  }
  #chatInput {
    flex-grow: 1;
    border: none;
    padding: 10px;
    font-size: 14px;
    outline: none;
    background: transparent;
    color: inherit;
  }
  #chatSendBtn {
    background: #0077ff;
    color: white;
    border: none;
    padding: 0 16px;
    cursor: pointer;
  }
  #chatSendBtn:hover {
    background: #005bb5;
  }
  /* 自動登出倒數 */
  #logoutTimer {
    position: fixed;
    bottom: 10px;
    right: 10px;
    font-size: 14px;
    color: #ff6b6b;
    font-weight: bold;
  }
  body.dark #logoutTimer {
    color: #00ffc8;
  }
</style>
</head>
<body class="bg1">

<div class="container">
  <div class="welcome-box" id="welcomeBox">
    <img src="https://i.pravatar.cc/150?u=userid" alt="用戶頭像" class="user-avatar" id="userAvatar" />
    <h1 id="welcomeName">歡迎，使用者！</h1>
    <p id="welcomeMsg">很高興你來到這裡。</p>

    <div class="badges" id="badges">
      <div class="badge">新手</div>
      <div class="badge">會員</div>
    </div>

    <div class="announcement" id="announcement">
      🎉 本週活動：完成個人資料可獲得 100 點積分！
    </div>

    <div class="twofa-warning" id="twofaWarning" style="display:none;">
      ⚠️ 為保障您的帳戶安全，請啟用雙因素驗證。
    </div>

    <div class="recommendations" id="recommendations">
      <strong>推薦給你：</strong>
      <ul>
        <li>探索最新文章</li>
        <li>加入社群討論</li>
        <li>查看專屬優惠</li>
      </ul>
    </div>

    <button class="edit-profile-button" id="editProfileBtn">編輯資料</button>
    <button class="toggle-theme" id="toggleThemeBtn">切換深色模式</button>

    <div class="bg-select" id="bgSelect">
      <div class="bg-option bg1 active" data-bg="bg1" title="粉紅漸層"></div>
      <div class="bg-option bg2" data-bg="bg2" title="綠色漸層"></div>
      <div class="bg-option bg3" data-bg="bg3" title="藍色漸層"></div>
      <div class="bg-option bg4" data-bg="bg4" title="紫色漸層"></div>
    </div>

    <div class="share-buttons">
      <a href="#" class="share-btn" id="shareFacebook" title="分享到 Facebook" target="_blank" rel="noopener noreferrer">
        <svg viewBox="0 0 24 24"><path d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 5 3.66 9.13 8.44 9.88v-6.99H7.9v-2.89h2.54V9.41c0-2.5 1.49-3.89 3.77-3.89 1.09 0 2.23.2 2.23.2v2.46h-1.25c-1.23 0-1.62.77-1.62 1.56v1.87h2.77l-.44 2.89h-2.33v6.99C18.34 21.13 22 17 22 12z"/></svg>
        Facebook
      </a>
      <a href="#" class="share-btn" id="shareTwitter" title="分享到 Twitter" target="_blank" rel="noopener noreferrer">
        <svg viewBox="0 0 24 24"><path d="M23 3a10.9 10.9 0 01-3.14.86 4.48 4.48 0 001.98-2.48 9.14 9.14 0 01-2.88 1.1A4.52 4.52 0 0016.11 2c-2.48 0-4.5 2.02-4.5 4.5 0 .35.04.69.12 1.02A12.94 12.94 0 013 3.16a4.48 4.48 0 001.39 6.02 4.42 4.42 0 01-2.04-.57v.06c0 2.16 1.54 3.96 3.58 4.37a4.5 4.5 0 01-2.03.08 4.5 4.5 0 004.2 3.13A9 9 0 012 19.54a12.76 12.76 0 006.92 2.03c8.3 0 12.85-6.87 12.85-12.83 0-.2 0-.42-.02-.63A9.27 9.27 0 0023 3z"/></svg>
        Twitter
      </a>
      <a href="#" class="share-btn" id="shareLine" title="分享到 LINE" target="_blank" rel="noopener noreferrer">
        <svg viewBox="0 0 24 24"><path d="M20 3H4c-1.1 0-2 .9-2 2v14l4-4h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>
        LINE
      </a>
    </div>

    <button class="logout-button" id="logoutBtn">登出</button>
  </div>
</div>

<!-- 編輯資料彈窗 -->
<div id="editProfileModal">
  <div class="modal-content">
    <h2>編輯個人資料</h2>
    <label for="inputName">姓名</label>
    <input type="text" id="inputName" placeholder="輸入姓名" />
    <label for="inputEmail">電子郵件</label>
    <input type="email" id="inputEmail" placeholder="輸入電子郵件" />
    <label for="inputAvatar">頭像 URL</label>
    <input type="text" id="inputAvatar" placeholder="輸入頭像圖片網址" />
    <div style="text-align: center;">
      <button class="save-btn" id="saveProfileBtn">儲存</button>
      <button class="close-btn" id="closeEditBtn">取消</button>
    </div>
  </div>
</div>

<!-- 聊天小幫手 -->
<div id="chatHelper" title="開啟聊天小幫手">💬</div>
<div id="chatBox">
  <div id="chatMessages"></div>
  <div id="chatInputArea">
    <input type="text" id="chatInput" placeholder="輸入訊息..." />
    <button id="chatSendBtn">送出</button>
  </div>
</div>

<!-- 自動登出倒數 -->
<div id="logoutTimer"></div>

<script>
  // 預設用戶資料
  const user = {
    name: "使用者",
    email: "user@example.com",
    avatar: "https://i.pravatar.cc/150?u=userid",
    badges: ["新手", "會員"],
    twoFAEnabled: false, // 假設未開啟雙因素驗證
  };

  // DOM元素
  const welcomeName = document.getElementById("welcomeName");
  const welcomeMsg = document.getElementById("welcomeMsg");
  const userAvatar = document.getElementById("userAvatar");
  const badgesContainer = document.getElementById("badges");
  const twofaWarning = document.getElementById("twofaWarning");
  const announcement = document.getElementById("announcement");
  const recommendations = document.getElementById("recommendations");
  const editProfileBtn = document.getElementById("editProfileBtn");
  const toggleThemeBtn = document.getElementById("toggleThemeBtn");
  const bgSelect = document.getElementById("bgSelect");
  const logoutBtn = document.getElementById("logoutBtn");
  const editProfileModal = document.getElementById("editProfileModal");
  const inputName = document.getElementById("inputName");
  const inputEmail = document.getElementById("inputEmail");
  const inputAvatar = document.getElementById("inputAvatar");
  const saveProfileBtn = document.getElementById("saveProfileBtn");
  const closeEditBtn = document.getElementById("closeEditBtn");
  const shareFacebook = document.getElementById("shareFacebook");
  const shareTwitter = document.getElementById("shareTwitter");
  const shareLine = document.getElementById("shareLine");

  // 初始化畫面
  function init() {
    updateUserUI();
    if (!user.twoFAEnabled) {
      twofaWarning.style.display = "block";
    } else {
      twofaWarning.style.display = "none";
    }
  }

  // 更新用戶介面資訊
  function updateUserUI() {
    welcomeName.textContent = `歡迎，${user.name}！`;
    userAvatar.src = user.avatar || "https://i.pravatar.cc/150?u=default";
    badgesContainer.innerHTML = "";
    user.badges.forEach(b => {
      const div = document.createElement("div");
      div.className = "badge";
      div.textContent = b;
      badgesContainer.appendChild(div);
    });
  }

  // 切換深色模式
  toggleThemeBtn.addEventListener("click", () => {
    document.body.classList.toggle("dark");
  });

  // 背景切換
  bgSelect.addEventListener("click", (e) => {
    if (e.target.classList.contains("bg-option")) {
      const selectedBg = e.target.dataset.bg;
      document.body.className = selectedBg + (document.body.classList.contains("dark") ? " dark" : "");
      // 更新選取樣式
      document.querySelectorAll(".bg-option").forEach(el => el.classList.remove("active"));
      e.target.classList.add("active");
    }
  });

  // 開啟編輯資料彈窗
  editProfileBtn.addEventListener("click", () => {
    inputName.value = user.name;
    inputEmail.value = user.email;
    inputAvatar.value = user.avatar;
    editProfileModal.classList.add("active");
  });

  // 關閉編輯資料彈窗
  closeEditBtn.addEventListener("click", () => {
    editProfileModal.classList.remove("active");
  });

  // 儲存編輯資料
  saveProfileBtn.addEventListener("click", () => {
    const newName = inputName.value.trim();
    const newEmail = inputEmail.value.trim();
    const newAvatar = inputAvatar.value.trim();
    if (newName) user.name = newName;
    if (newEmail) user.email = newEmail;
    if (newAvatar) user.avatar = newAvatar;
    updateUserUI();
    editProfileModal.classList.remove("active");
  });

  // 社群分享按鈕功能
  function encodeURIComp(str) {
    return encodeURIComponent(str);
  }
  const pageUrl = encodeURIComp(window.location.href);
  const shareText = encodeURIComp(`歡迎來到我的個人頁面！`);

  shareFacebook.href = `https://www.facebook.com/sharer/sharer.php?u=${pageUrl}`;
  shareTwitter.href = `https://twitter.com/intent/tweet?url=${pageUrl}&text=${shareText}`;
  shareLine.href = `https://social-plugins.line.me/lineit/share?url=${pageUrl}`;

  // 登出功能模擬
  logoutBtn.addEventListener("click", () => {
    alert("你已登出。");
    // 模擬清除資料、跳轉等...
  });

  // 聊天小幫手
  const chatHelper = document.getElementById("chatHelper");
  const chatBox = document.getElementById("chatBox");
  const chatMessages = document.getElementById("chatMessages");
  const chatInput = document.getElementById("chatInput");
  const chatSendBtn = document.getElementById("chatSendBtn");

  chatHelper.addEventListener("click", () => {
    chatBox.classList.toggle("active");
  });

  chatSendBtn.addEventListener("click", () => {
    sendMessage();
  });

  chatInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") sendMessage();
  });

  function sendMessage() {
    const msg = chatInput.value.trim();
    if (!msg) return;
    appendChatMessage("我", msg);
    chatInput.value = "";
    // 模擬 AI 回覆
    setTimeout(() => {
      appendChatMessage("小幫手", "這是一個示範回覆，您說的是：" + msg);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }, 800);
  }

  function appendChatMessage(sender, msg) {
    const div = document.createElement("div");
    div.style.marginBottom = "10px";
    div.innerHTML = `<strong>${sender}：</strong>${msg}`;
    chatMessages.appendChild(div);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  // 自動登出倒數計時（例如5分鐘）
  const LOGOUT_SECONDS = 300; // 5分鐘
  let logoutCounter = LOGOUT_SECONDS;
  const logoutTimer = document.getElementById("logoutTimer");

  function updateLogoutTimer() {
    const min = Math.floor(logoutCounter / 60);
    const sec = logoutCounter % 60;
    logoutTimer.textContent = `自動登出倒數：${min}:${sec.toString().padStart(2,"0")}`;
    if (logoutCounter === 0) {
      alert("時間到，自動登出！");
      // 模擬登出行為
      logoutCounter = LOGOUT_SECONDS;
      logoutTimer.textContent = "";
    } else {
      logoutCounter--;
    }
  }
  setInterval(updateLogoutTimer, 1000);

  // 初始化
  init();
</script>

</body>
</html>
