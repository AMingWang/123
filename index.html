<html lang="zh-TW"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="幣圈3星電選4倍10期 - 提供區塊鏈合約隨機開單工具，讓您輕鬆模擬下單投注，娛樂性與實用性兼具。">
  <meta name="keywords" content="幣圈3星電選4倍10期, 幣圈三星電選四倍十期, 3星電選4倍10期, 三星電選四倍十期, 區塊鏈, 合約交易, 下單投注">

  <!-- Open Graph 標籤，利於社群分享 -->
  <meta property="og:title" content="幣圈3星電選4倍10期">
  <meta property="og:description" content="使用我們的隨機開單工具，模擬區塊鏈合約下單投注，純屬娛樂！">
  <meta property="og:url" content="https://miner.tw/bingobingo/">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://miner.tw/bingobingo/fake_logo.png">

  <title>幣圈3星電選4倍10期</title>
  <!-- 使用 Noto Sans TC 作為中文字體 -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&amp;display=swap" rel="stylesheet">
  <!-- 引入 canvas-confetti (彩帶效果) -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <style>
    /* 全站重置與字型 */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Noto Sans TC", sans-serif;
    }
    /* 頁面背景：柔和米黃色漸層 */
    body {
      background: linear-gradient(180deg, #fcf8cc 0%, #ffeb83 100%);
      min-height: 100vh;
    }
    /* 頂部導覽列 - 桌面版採用三欄佈局 */
    .top-bar {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: #3F7779;
      padding: 12px 20px;
    }
    .top-bar .left,
    .top-bar .right {
      width: 50px;
    }
    .top-bar .left img {
      height: 50px;
    }
    /* 將中間標題改為 H1，並整合關鍵字 */
    .top-title {
      flex: 1;
      text-align: center;
      color: #fff;
      font-weight: bold;
      font-size: 1.8rem;
      margin: 0;
    }
    /* 手機版頂部導覽列：垂直排列 */
    @media (max-width: 767px) {
      .top-bar {
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 80px;
      }
      .top-bar .left, .top-bar .right {
        width: auto;
      }
      .top-bar .left img {
        height: 50px;
      }
      .top-title {
        position: static;
        transform: none;
        margin-top: 10px;
        font-size: 1.6rem;
      }
    }
    /* 主要內容區 */
    .container {
      background: #ffffff;
      border-radius: 20px;
      padding: 30px 40px;
      max-width: 650px;
      width: 95%;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      transition: transform 0.3s;
      margin: 20px auto 40px;
    }
    .container:hover {
      transform: scale(1.02);
    }
    /* 進階設定區：預設隱藏，平滑展開／收合 */
    #advanced-settings {
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transition: max-height 0.4s ease-in-out, opacity 0.4s ease-in-out;
      margin-bottom: 20px;
    }
    #advanced-settings.open {
      max-height: 1000px;
      opacity: 1;
      overflow: visible;
    }
    /* 進階設定切換按鈕 */
    #toggle-advanced {
      display: block;
      width: 180px;
      margin: 0 auto 20px;
      padding: 10px 20px;
      background: linear-gradient(135deg, #3F7779, #2a556a);
      color: #fff;
      border: none;
      border-radius: 25px;
      font-size: 1.1rem;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s, box-shadow 0.2s;
    }
    #toggle-advanced:hover {
      background: linear-gradient(135deg, #2a556a, #3F7779);
      transform: scale(1.05);
      box-shadow: 0px 4px 12px rgba(0,0,0,0.2);
    }
    #toggle-advanced::after {
      content: ' ▼';
      font-size: 0.9rem;
      transition: transform 0.3s;
    }
    #toggle-advanced.open::after {
      transform: rotate(180deg);
    }
    /* 表單元件樣式 */
    .form-group {
      margin-bottom: 18px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      color: #555;
      font-size: 1.1rem;
    }
    input[type="text"],
    input[type="number"] {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #e40011;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s, box-shadow 0.3s;
    }
    input[type="text"]:focus,
    input[type="number"]:focus {
      border-color: #a8000b;
      box-shadow: 0 0 5px rgba(228,0,17,0.5);
      outline: none;
    }
    .radio-group, .checkbox-group {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .radio-group input[type="radio"],
    .checkbox-group input[type="checkbox"] {
      transform: scale(1.2);
      accent-color: #4A90E2;
    }
    /* 下單投注按鈕 */
    #roll-button {
      background: #E60012;
      color: #fff;
      border: none;
      border-radius: 50px;
      padding: 12px 30px;
      font-size: 1.2rem;
      cursor: pointer;
      transition: background 0.3s, transform 0.3s;
      width: 100%;
    }
    #roll-button:hover {
      background: #C60000;
      transform: scale(1.03);
    }
    /* Slot Machine 結果區 - 使用 CSS Grid 佈局 */
    .slot-machine {
      margin-top: 30px;
      padding: 20px;
      background: #ffe001;
      border: 3px dashed #e40011;
      border-radius: 20px;
      overflow: hidden;
      display: grid;
      gap: 15px;
    }
    /* 桌面版：依據顯示中 Slot 數量動態平均分配 */
    @media (min-width: 768px) {
      .slot-machine {
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      }
    }
    /* 手機版：固定一排 3 個 Slot */
    @media (max-width: 767px) {
      .slot-machine {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    /* Slot 基本樣式 */
    .slot {
      height: 80px;
      border: 1px solid #e40011;
      border-radius: 12px;
      background: #fff;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
    }
    .slot-header {
      height: 40px;
      line-height: 40px;
      background: #e40011;
      text-align: center;
      font-weight: bold;
      border-bottom: 1px solid #e40011;
      color: #fff;
      flex-shrink: 0;
    }
    .slot-content {
      position: relative;
      height: 40px;
      overflow: hidden;
      background: #fff;
    }
    .reel {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
    }
    .slot-item {
      height: 40px;
      line-height: 40px;
      text-align: center;
      color: #4A4A4A;
    }
    /* 移除旋轉特效 */
    @keyframes pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }
    .pop {
      animation: pop 0.5s;
    }
    /* 說明與推薦資料區塊，統一風格 */
    .info-section {
      background: #ffffff;
      border-radius: 20px;
      padding: 20px 30px;
      max-width: 650px;
      width: 95%;
      margin: 20px auto;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    }
    .info-section table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 0.9rem;
    }
    .info-section th, .info-section td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    .info-section th {
      background: #3F7779;
      color: #fff;
    }
    .info-section a {
      color: #E60012;
      text-decoration: none;
    }
    .info-section a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <!-- 頂部導覽列 -->
  <header class="top-bar">
    <div class="left">
      <img src="https://miner.tw/bingobingo/fake_logo.png" alt="台灣彩券">
    </div>
    <!-- 將中間標題改為 H1，並整合您需要的關鍵字 -->
    <h1 class="center top-title">幣圈3星電選4倍10期</h1>
    <div class="right"></div>
  </header>

  <!-- 主要內容區 -->
  <div class="container">
    <!-- 進階設定切換按鈕 -->
    <button id="toggle-advanced">進階設定</button>
    <!-- 進階設定區塊，預設隱藏 -->
    <div id="advanced-settings">
      <div class="form-group">
        <label for="token-input">幣種 (手動輸入或使用隨機)：</label>
        <input type="text" id="token-input" placeholder="例如：BTC">
        <div class="checkbox-group">
          <input type="checkbox" id="random-token-checkbox">
          <label for="random-token-checkbox">隨機幣種 (從幣安查詢)</label>
        </div>
      </div>
      <div class="form-group">
        <label for="max-amount">最大金額 (USDT)：</label>
        <input type="number" id="max-amount" placeholder="例如：1000" value="1000">
      </div>
      <div class="form-group">
        <label for="leverage-input">最大槓桿倍數 (1-XX)：</label>
        <input type="number" id="leverage-input" placeholder="例如：10">
      </div>
      <div class="form-group">
        <label>交易方向：</label>
        <div class="radio-group">
          <input type="radio" name="direction" id="long" value="多" checked="">
          <label for="long">多</label>
          <input type="radio" name="direction" id="short" value="空">
          <label for="short">空</label>
          <input type="radio" name="direction" id="random-dir" value="隨機">
          <label for="random-dir">隨機</label>
        </div>
      </div>
      <div class="form-group">
        <div class="checkbox-group">
          <!-- 預設打開止盈止損 -->
          <input type="checkbox" id="random-tp-sl" checked="">
          <label for="random-tp-sl">隨機止盈止損</label>
        </div>
      </div>
    </div>
    
    <!-- 下單投注按鈕 -->
    <div class="form-group" style="text-align: center;">
      <button id="roll-button">下單投注</button>
    </div>
    
    <!-- Slot Machine 結果區 -->
    <div class="slot-machine" id="slot-machine" style="grid-template-columns: repeat(3, 1fr);">
      <div class="slot" id="slot-token">
        <div class="slot-header">幣種</div>
        <div class="slot-content"><div class="reel" style="top: -360px; transition: top 2000ms cubic-bezier(0.33, 1, 0.68, 1);"><div class="slot-item">VIDT</div><div class="slot-item">ENA</div><div class="slot-item">BNT</div><div class="slot-item">OP</div><div class="slot-item">TURBO</div><div class="slot-item">BERA</div><div class="slot-item">APE</div><div class="slot-item">ZEREBRO</div><div class="slot-item">ICP</div><div class="slot-item">XLM</div></div></div>
      </div>
      <div class="slot" id="slot-amount">
        <div class="slot-header">金額</div>
        <div class="slot-content"><div class="reel" style="top: -360px; transition: top 2500ms cubic-bezier(0.33, 1, 0.68, 1);"><div class="slot-item">666.28</div><div class="slot-item">384.80</div><div class="slot-item">101.98</div><div class="slot-item">570.89</div><div class="slot-item">841.17</div><div class="slot-item">494.20</div><div class="slot-item">339.75</div><div class="slot-item">296.48</div><div class="slot-item">840.40</div><div class="slot-item">897.22</div></div></div>
      </div>
      <div class="slot" id="slot-direction">
        <div class="slot-header">方向</div>
        <div class="slot-content"><div class="reel" style="top: -360px; transition: top 3000ms cubic-bezier(0.33, 1, 0.68, 1);"><div class="slot-item">空</div><div class="slot-item">多</div><div class="slot-item">空</div><div class="slot-item">多</div><div class="slot-item">空</div><div class="slot-item">空</div><div class="slot-item">多</div><div class="slot-item">空</div><div class="slot-item">多</div><div class="slot-item">多</div></div></div>
      </div>
      <div class="slot" id="slot-leverage">
        <div class="slot-header">槓桿</div>
        <div class="slot-content"><div class="reel" style="top: -360px; transition: top 2200ms cubic-bezier(0.33, 1, 0.68, 1);"><div class="slot-item">6X</div><div class="slot-item">15X</div><div class="slot-item">19X</div><div class="slot-item">9X</div><div class="slot-item">5X</div><div class="slot-item">11X</div><div class="slot-item">14X</div><div class="slot-item">2X</div><div class="slot-item">11X</div><div class="slot-item">17X</div></div></div>
      </div>
      <div class="slot" id="slot-tp">
        <div class="slot-header">止盈</div>
        <div class="slot-content"><div class="reel" style="top: -360px; transition: top 3500ms cubic-bezier(0.33, 1, 0.68, 1);"><div class="slot-item">40.5%</div><div class="slot-item">36.3%</div><div class="slot-item">43.6%</div><div class="slot-item">29.3%</div><div class="slot-item">25.2%</div><div class="slot-item">47.7%</div><div class="slot-item">11.9%</div><div class="slot-item">38.9%</div><div class="slot-item">19.2%</div><div class="slot-item">35.1%</div></div></div>
      </div>
      <div class="slot" id="slot-sl">
        <div class="slot-header">止損</div>
        <div class="slot-content"><div class="reel" style="top: -360px; transition: top 4000ms cubic-bezier(0.33, 1, 0.68, 1);"><div class="slot-item">-31.4%</div><div class="slot-item">-42.8%</div><div class="slot-item">-43.0%</div><div class="slot-item">-26.4%</div><div class="slot-item">-6.2%</div><div class="slot-item">-38.5%</div><div class="slot-item">-30.9%</div><div class="slot-item">-9.3%</div><div class="slot-item">-53.2%</div><div class="slot-item">-39.2%</div></div></div>
      </div>
    </div>
  </div>
  
  <!-- 說明與推薦資料區塊 -->
  <div class="info-section">
    <table id="tablepress-25">
      <thead>
        <tr>
          <th>交易所</th>
          <th>優惠折扣</th>
          <th>推薦邀請碼</th>
          <th>註冊連結</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>幣安</td>
          <td>20%手續費回饋</td>
          <td>X6KZ8VLA</td>
          <td><a href="https://www.binance.com/zh-TC/join?ref=X6KZ8VLA" target="_blank">點我註冊</a></td>
        </tr>
        <tr>
          <td>OKX</td>
          <td>20%手續費回饋</td>
          <td>5244997</td>
          <td><a href="https://www.okx.com/join/5244997" target="_blank">點我註冊</a></td>
        </tr>
        <tr>
          <td>BingX</td>
          <td>25%手續費回饋</td>
          <td>UWMAWOYI</td>
          <td><a href="https://bingx.com/invite/UWMAWOYI" target="_blank">點我註冊</a></td>
        </tr>
        <tr>
          <td>Bitget</td>
          <td>20%手續費回饋</td>
          <td>vqlo3847</td>
          <td><a href="https://partner.bitget.com/bg/19tpafus" target="_blank">點我註冊</a></td>
        </tr>
        <tr>
          <td>派網</td>
          <td>20%手續費回饋</td>
          <td>123</td>
          <td><a href="https://www.pionex.com/zh-TW/sign/ref/f2Mujca0zT" target="_blank">點我註冊</a></td>
        </tr>
        <tr>
          <td>Bybit</td>
          <td>送3030體驗金</td>
          <td>22823</td>
          <td><a href="https://partner.bybit.com/b/miner" target="_blank">點我註冊</a></td>
        </tr>
        <tr>
          <td>MAX</td>
          <td>20%手續費回饋</td>
          <td>96279a70</td>
          <td><a href="https://max.maicoin.com/signup?r=96279a70" target="_blank">點我註冊</a></td>
        </tr>
        <tr>
          <td>Gate.io</td>
          <td>20%手續費回饋</td>
          <td>A1FHUFpW</td>
          <td><a href="https://www.gate.io/signup/A1FHUFpW?ref_type=103" target="_blank">點我註冊</a></td>
        </tr>
        <tr>
          <td>MEXC</td>
          <td>20%手續費回饋</td>
          <td>mexc-miner</td>
          <td><a href="https://www.mexc.com/zh-TW/register?inviteCode=mexc-miner" target="_blank">點我註冊</a></td>
        </tr>
      </tbody>
    </table>
    <p style="text-align:center; margin-top:20px; color:#555; font-size:0.95rem;">
      本網頁僅供娛樂用途，若您有意註冊區塊鏈交易所，歡迎參考上表資料。
    </p>
  </div>
  
  <script>
    // 更新 Slot Machine Grid：桌面版依據顯示中 Slot 數量平均分配，手機版固定 3 欄
    function updateSlotMachineGrid() {
      const slotMachine = document.getElementById("slot-machine");
      if (window.innerWidth <= 767) {
        slotMachine.style.gridTemplateColumns = "repeat(3, 1fr)";
      } else {
        const slots = slotMachine.querySelectorAll(".slot");
        let visibleCount = 0;
        slots.forEach(slot => {
          if (window.getComputedStyle(slot).display !== "none") {
            visibleCount++;
          }
        });
        if (visibleCount < 1) visibleCount = 1;
        slotMachine.style.gridTemplateColumns = `repeat(${visibleCount}, 1fr)`;
      }
    }
    // 初次更新 Grid 佈局
    updateSlotMachineGrid();
    window.addEventListener("resize", updateSlotMachineGrid);
    
    // 進階設定切換按鈕
    const toggleAdvanced = document.getElementById("toggle-advanced");
    toggleAdvanced.addEventListener("click", function() {
      const adv = document.getElementById("advanced-settings");
      if (adv.classList.contains("open")) {
        adv.classList.remove("open");
        this.classList.remove("open");
        this.textContent = "進階設定";
      } else {
        adv.classList.add("open");
        this.classList.add("open");
        this.textContent = "隱藏設定";
      }
      updateSlotMachineGrid();
    });
    
    document.addEventListener("DOMContentLoaded", async function() {
      // 取得輸入與按鈕元素
      const tokenInput = document.getElementById("token-input");
      const randomTokenCheckbox = document.getElementById("random-token-checkbox");
      const maxAmountInput = document.getElementById("max-amount");
      const leverageInput = document.getElementById("leverage-input");
      const directionRadios = document.getElementsByName("direction");
      const randomTPSLCheckbox = document.getElementById("random-tp-sl");
      const rollButton = document.getElementById("roll-button");

      // 取得各 slot 的內容區 (僅 .slot-content)
      const slotTokenContent = document.querySelector("#slot-token .slot-content");
      const slotAmountContent = document.querySelector("#slot-amount .slot-content");
      const slotDirectionContent = document.querySelector("#slot-direction .slot-content");
      const slotLeverageContent = document.querySelector("#slot-leverage .slot-content");
      const slotTPContent = document.querySelector("#slot-tp .slot-content");
      const slotSLContent = document.querySelector("#slot-sl .slot-content");

      // 當勾選隨機幣種時禁用手動輸入
      randomTokenCheckbox.addEventListener("change", function() {
        tokenInput.disabled = this.checked;
      });

      // 當勾選隨機止盈止損時顯示或隱藏對應區塊，並更新 Grid 佈局
      randomTPSLCheckbox.addEventListener("change", function() {
        if (this.checked) {
          document.getElementById("slot-tp").style.display = "block";
          document.getElementById("slot-sl").style.display = "block";
        } else {
          document.getElementById("slot-tp").style.display = "none";
          document.getElementById("slot-sl").style.display = "none";
        }
        updateSlotMachineGrid();
      });

      // 串接 Binance API 取得合約交易幣種
      async function fetchBinanceFuturesSymbols() {
        try {
          const response = await fetch("https://fapi.binance.com/fapi/v1/exchangeInfo");
          const data = await response.json();
          const symbols = data.symbols.filter(s => s.quoteAsset === "USDT" && s.status === "TRADING");
          const tokens = symbols.map(s => s.baseAsset);
          return [...new Set(tokens)];
        } catch (err) {
          console.error("Error fetching Binance futures symbols:", err);
          return [];
        }
      }

      // 初始取得 Binance 幣種資料
      let binanceTokens = await fetchBinanceFuturesSymbols();
      if (binanceTokens.length === 0) {
        binanceTokens = ["BTC", "ETH", "BNB", "ADA", "XRP", "SOL", "DOT", "DOGE"];
      }

      // 產生隨機金額 (介於 1 ~ 最大金額)
      function generateRandomAmount(max) {
        const min = 1;
        let amt = Math.random() * (max - min) + min;
        return amt.toFixed(2);
      }

      // 產生隨機百分比 (1.0% ~ 10.0%)
      function generateRandomPercentage() {
        return (Math.random() * 49 + 5).toFixed(1) + "%";
      }

      // 取得選取的交易方向（使用 Array.from 處理 NodeList）
      function getSelectedDirection() {
        let selected = "";
        Array.from(directionRadios).forEach(function(radio) {
          if (radio.checked) {
            selected = radio.value;
          }
        });
        if (selected === "隨機") {
          selected = Math.random() < 0.5 ? "多" : "空";
        }
        return selected;
      }

      // 根據類型取得隨機中間項目的值
      function getRandomValue(type, options) {
        if (type === "token") {
          return binanceTokens[Math.floor(Math.random() * binanceTokens.length)];
        } else if (type === "amount") {
          let maxAmt = (options && options.maxAmount) ? options.maxAmount : 100;
          return generateRandomAmount(maxAmt);
        } else if (type === "direction") {
          return Math.random() < 0.5 ? "多" : "空";
        } else if (type === "tp") {
          return generateRandomPercentage();
        } else if (type === "sl") {
          return "-" + generateRandomPercentage();
        } else if (type === "leverage") {
          let maxLev = (options && options.maxLeverage) ? options.maxLeverage : 20;
          return (Math.floor(Math.random() * maxLev) + 1) + "X";
        } else {
          return "";
        }
      }

      // 使用捲軸動畫顯示結果：以改變元素 top 屬性方式（項目數量固定為 10）
      function rollSlot(slotContent, finalValue, duration, type, options) {
        slotContent.innerHTML = "";
        const reel = document.createElement("div");
        reel.className = "reel";
        const itemCount = 10;
        const itemHeight = 40;
        for (let i = 0; i < itemCount - 1; i++) {
          const item = document.createElement("div");
          item.className = "slot-item";
          item.textContent = getRandomValue(type, options);
          reel.appendChild(item);
        }
        const finalItem = document.createElement("div");
        finalItem.className = "slot-item";
        finalItem.textContent = finalValue;
        reel.appendChild(finalItem);
        slotContent.appendChild(reel);
        reel.style.top = "0px";
        void reel.offsetWidth;
        reel.style.transition = `top ${duration}ms cubic-bezier(0.33, 1, 0.68, 1)`;
        const finalTop = - (itemCount - 1) * itemHeight;
        setTimeout(function() {
          reel.style.top = `${finalTop}px`;
        }, 50);
        reel.addEventListener("transitionend", function() {
          slotContent.parentElement.classList.add("pop");
          setTimeout(function() {
            slotContent.parentElement.classList.remove("pop");
          }, 500);
        });
      }

      // 取得當前價格（傳入 symbol，例如 "BTCUSDT"）
      async function fetchCurrentPrice(symbol) {
        try {
          const response = await fetch("https://fapi.binance.com/fapi/v1/ticker/price?symbol=" + symbol);
          const data = await response.json();
          return parseFloat(data.price);
        } catch (err) {
          console.error("Error fetching current price:", err);
          return null;
        }
      }

      rollButton.addEventListener("click", async function() {
        let token = tokenInput.value.trim();
        if (randomTokenCheckbox.checked || !token) {
          token = binanceTokens[Math.floor(Math.random() * binanceTokens.length)];
        }
        let maxAmt = parseFloat(maxAmountInput.value);
        if (isNaN(maxAmt) || maxAmt <= 0) { maxAmt = 100; }
        let amount = generateRandomAmount(maxAmt);
        let direction = getSelectedDirection();
        let tp = randomTPSLCheckbox.checked ? generateRandomPercentage() : "";
        let sl = randomTPSLCheckbox.checked ? "-" + generateRandomPercentage() : "";
        let maxLeverage = parseInt(leverageInput.value);
        if (isNaN(maxLeverage) || maxLeverage < 1) { maxLeverage = 20; }
        let leverageValue = Math.floor(Math.random() * maxLeverage) + 1;
        
        const finalTokenValue = token;
        const finalAmountValue = amount;
        const finalDirectionValue = direction;
        const finalLeverageValue = leverageValue + "X";
        const finalTPValue = tp;
        const finalSLValue = sl;

        // 啟動捲軸動畫（僅作用於內容區）
        rollSlot(slotTokenContent, finalTokenValue, 2000, "token");
        rollSlot(slotAmountContent, finalAmountValue, 2500, "amount", { maxAmount: maxAmt });
        rollSlot(slotDirectionContent, finalDirectionValue, 3000, "direction");
        rollSlot(slotLeverageContent, finalLeverageValue, 2200, "leverage", { maxLeverage: maxLeverage });
        if (randomTPSLCheckbox.checked) {
          rollSlot(slotTPContent, finalTPValue, 3500, "tp");
          rollSlot(slotSLContent, finalSLValue, 4000, "sl");
        }
        // 更新 Grid 佈局
        updateSlotMachineGrid();

        // 動畫結束後取得現價並計算止盈止損，再觸發彩帶與 alert 印出結果
        // setTimeout(async function() {
        //   let resultMsg = "最終結果：\n幣種：" + finalTokenValue +
        //                   "\n金額：" + finalAmountValue + " USDT" +
        //                   "\n方向：" + finalDirectionValue +
        //                   "\n槓桿：" + finalLeverageValue;
        //   if (randomTPSLCheckbox.checked) {
        //     let symbol = finalTokenValue.toUpperCase() + "USDT";
        //     let currentPrice = await fetchCurrentPrice(symbol);
        //     if (currentPrice !== null) {
        //       let tpPerc = parseFloat(finalTPValue.replace("%", ""));
        //       let slPerc = parseFloat(finalSLValue.replace("%", ""));
        //       let computedTP, computedSL;
        //       if (finalDirectionValue === "多") {
        //         computedTP = currentPrice * (1 + tpPerc / 100);
        //         computedSL = currentPrice * (1 - slPerc / 100);
        //       } else { // 空單
        //         computedTP = currentPrice * (1 - tpPerc / 100);
        //         computedSL = currentPrice * (1 + slPerc / 100);
        //       }
        //       resultMsg += "\n現價：" + currentPrice.toFixed(2) + " USDT";
        //       resultMsg += "\n止盈：" + finalTPValue + " => " + computedTP.toFixed(2) + " USDT";
        //       resultMsg += "\n止損：" + finalSLValue + " => " + computedSL.toFixed(2) + " USDT";
        //     } else {
        //       resultMsg += "\n無法取得現價";
        //     }
        //   }
        //   confetti({
        //     particleCount: 100,
        //     spread: 70,
        //     origin: { y: 0.6 }
        //   });
        //   alert(resultMsg);
        // }, 4300);
      });
    });
  </script>


</body></html>
